{% extends 'admin_layout.html' %}

{% block css %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/admin/delete_modal.css') }}">
{% endblock css %}

{% block main %}

{% for parent, child_pagination in categories.items() %}
<div class="report-container">
    <div class="report-header">
        <h1 class="recent-Articles">{{ parent.category }}</h1>
        <a class="view" href="{{ url_for('addpicture', id=parent.id) }}">Add picture</a>
    </div>

    <div class="report-body">
        <div class="report-topic-heading">
            <h3 class="t-op">Images</h3>
            <h3 class="t-op">Edit</h3>
            <h3 class="t-op">Delete</h3>
        </div>

        <div class="items">
            {% for child in child_pagination.items %}
            <div class="item1">
                <img src="{{ url_for('static', filename='images/' + child.image) }}" alt="" width="90px" height="50px">
                <a href="{{ url_for('editpicture', id = child.id) }}" class="t-op-nextlvl label-tag" >Edit</a>


            <button  onclick="document.getElementById('id01').style.display='block'"> Delete </button>

        <div id="id01" class="modal">
            <span onclick="document.getElementById('id01').style.display='none'" class="close" title="Close Modal"></span>
            <form class="modal-content" action="{{ url_for('deletepicture', id=child.id)}}" method="POST">
                <div class="container">
                <h1>Delete Account</h1>
                <p>Are you sure you want to delete this image?</p>
                
                <div class="clearfix">
                    <button type="button" onclick="document.getElementById('id01').style.display='none'" class="cancelbtn">Cancel</button>
                    <button type="submit" onclick="document.getElementById('id01').style.display='none'" class="deletebtn">Delete</button>
                </div>
                </div>
            </form>
            </div>
            </div>
            
            {% endfor %}
    
            <div class="col text-center">
                {% if child_pagination.has_prev %}
                <a href="{{ url_for('paginatepictures', id=parent.id, page=child_pagination.prev_num) }}" class="btn btn-info btn-sm mt-3"> Prev </a>
                {% endif %}
            
                {% for page_num in child_pagination.iter_pages() %}
                {% if page_num %}
                {% if child_pagination.page == page_num %}
                <a href="{{ url_for('paginatepictures',  id=parent.id, page=page_num) }}" class="btn btn-info btn-sm mt-3"> {{ page_num }} </a>
                {% else %}
                <a href="{{ url_for('paginatepictures', id=parent.id, page=page_num) }}" class="btn btn-outline-info btn-sm mt-3"> {{ page_num }} </a>
                {% endif %}
                {% else %}
                ...
                {% endif %}
                {% endfor %}
                {% if child_pagination.has_next %}
                <a href="{{ url_for('paginatepictures', id=parent.id, page=child_pagination.next_num) }}" class="btn btn-info btn-sm mt-3"> Next </a>
                {% endif %}
               </div>
        </div>
    </div>
</div>
{% endfor %}

</div>

<script>
    // Get the modal
    var modal = document.getElementById('id01');
    
    // When the user clicks anywhere outside of the modal, close it
    window.onclick = function(event) {
      if (event.target == modal) {
        modal.style.display = "none";
      }
    }
    </script>
{% endblock main %}